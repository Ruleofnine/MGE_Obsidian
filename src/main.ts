import { Plugin, addIcon,App,PluginSettingTab,Setting } from 'obsidian';
import { MYTHIC_VIEW, MythicView } from "./views";
const iconSvg = `
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 90">
		<image  width="90" height="90" id="img1" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAAAXNSR0IB2cksfwAAKNpJREFUeJzt3Xm0bVV1JnDu63g+kCbA49EIPFFaG/ApAQWlkU5FUEHEXrCLKHgFFfu+wQZ7KcSh0dJhiDHGaGmRYaUwRqJJUPKsKBUNwZgYwZhCiRaicOr77Zzv1vb6WvBB/vCMscY595y915rzm3N+c6611953s7PPPntWe85znjP7lKc8ZfZRj3rU7HHHHTd7/PHHz5544omzj3jEI4a/jzzyyNljjjlm9uSTT559whOeMJzz0pe+dNbrGc94xuzRRx89e9RRRw2/P/rRjx7Ocb7Pj3vc44bvDznkkNn9999/9q53vevsTjvtNLtixYrZ7bfffnbbbbed3XrrrYe2zTbbzO64446ze+655+yqVatmjz322OF99913H867293uNnuXu9xldo899pg98MADZ3/7t397kM1YJ5xwwuwRRxwxtMc+9rGzT3/602fPPffc2Wc+85mzD37wg2fvec97Dscfeuihw/sDHvCAQSZjaXSHwQEHHDDIUZnGsu2www6D3Bo5yPCYxzxmwGDlypWzy5cvH9p22203HN9+NvvN6zev37x+8/pP+gp/bf47v/M7vxWuPDjvx6ednnaez/lujztKric+8Ykzp59++qJnPetZW0aW3aeyPUyLXIdF7hV3lGwb9UoyWhqBt4/gZ6a9J+3r+fv7addHiRvTvp/vLmGE21OujL84Y2+Xce+d9oy0N03lIM+10/a/0t6Ytvj2lG2DX8naMwGYB98/7R1pn4nHfDvtX5/97GfflDbJ75N40iTfTfL79WmvyndLNqVcAXZhAN4i46zKeM9K+1DaFyLDt9KuPfPMM69PG2Q744wzvN+U37+UtsWmlGujXxFsmfCLMo/N+8VpPwAkYFMKTijx5Cc/eXLqqadOHvjAB05SCk5y7PB9jr0q7aT8/Wvz7Iw187SnPW1J+r1z2kOmdPX+tO9UrpS0wztgU7JOUspOUvJNUsZOQiuTGOcHOf5evy6ZbvMrAOE4AF+Q9q0q8tznPndoT33qUyepayfx9knq6klq2Enq6UlqayBrvOczaQf/umQKSDj3kWlnp61Ouzpy3QRchj/rrLMGgFPjT0477bRJaujJgx70oMnOO+88ufe97z3Iy7tz3sN/XTJt9CuA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"/>
  </svg>
`;

interface MGEPluginSettings {
	epubDir: string;
}

const DEFAULT_SETTINGS: MGEPluginSettings = {
	epubDir: "epubs" // default relative to vault
};
export default class MGE extends Plugin {
	statusBarTextElement: HTMLSpanElement;
	settings: MGEPluginSettings;
	async onload() {
		console.log("Mythic Game Emulator(Version 2) plugin loaded")
		// Load settings
		await this.loadSettings();

		// Add settings tab
		this.addSettingTab(new MGEPluginSettingTab(this.app, this));
		const faScript = document.createElement('script');
		faScript.src = 'https://kit.fontawesome.com/8d28eaccd0.js';
		faScript.crossOrigin = 'anonymous';
		document.head.appendChild(faScript);
		this.addCommand({
			id: 'mythic-view',
			name: 'open mythic',
			callback: () => {
				this.activateView();
			},
		});
		addIcon('M', iconSvg);
		this.registerView(
			MYTHIC_VIEW,
			(leaf) => new MythicView(leaf,this)
		);
		this.addRibbonIcon("M", "Mythic Game Emulator", () => {
			this.activateView();
		});
	}

	async loadSettings() {
		this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
	}

	async saveSettings() {
		await this.saveData(this.settings);
	}
	async onunload() {
		this.app.workspace.detachLeavesOfType(MYTHIC_VIEW);
	}
	async activateView() {
		this.app.workspace.detachLeavesOfType(MYTHIC_VIEW);
		await this.app.workspace.getRightLeaf(false).setViewState({
			type: MYTHIC_VIEW,
			active: true,
		});
		this.app.workspace.revealLeaf(
			this.app.workspace.getLeavesOfType(MYTHIC_VIEW)[0]
		);
	}
}

class MGEPluginSettingTab extends PluginSettingTab {
	plugin: MGE;

	constructor(app: App, plugin: MGE) {
		super(app, plugin);
		this.plugin = plugin;
	}

	display(): void {
		const { containerEl } = this;
		containerEl.empty();

		containerEl.createEl("h2", { text: "Mythic Game Emulator Settings" });

		new Setting(containerEl)
			.setName("EPUB Directory")
			.setDesc("Folder path for your EPUB files (can be in or outside the vault).")
			.addText(text => text
				.setPlaceholder("epubs")
				.setValue(this.plugin.settings.epubDir)
				.onChange(async (value) => {
					this.plugin.settings.epubDir = value.trim();
					await this.plugin.saveSettings();
				}));
	}
}
